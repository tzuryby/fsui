set daemon  10
set logfile syslog facility log_daemon
set httpd port 2812 and
    allow localhost
    allow admin:admin
    allow afikoman:afikoman readonly
    allow @monit
    allow @users readonly

check process SNAPUI with pidfile "/var/run/snoipui.pid"
    start program = "/usr/local/bin/snoipui start"
    stop program = "/usr/local/bin/snoipui stop"
    group snap
    
check process SNAPSwitch with pidfile "/usr/local/freeswitch/run/freeswitch.pid"
    start program = "/usr/local/bin/freeswitchd start"
    stop program = "/usr/local/bin/freeswitchd stop"
    group snap

check process SNAPAudio with pidfile "/var/run/waveconvert.pid"
    start program = "/usr/local/bin/waveconvert --background"
    stop program = "/usr/local/bin/waveconvert --stop"
    group snap

check directory SNAPConfig with path /usr/local/freeswitch/conf
    if changed timestamp
        then exec "/usr/local/bin/freeswitchd start"

check file SNAPLog with path /usr/local/freeswitch/log/freeswitch.log
    if size > 20000 MB 
        then exec "/bin/echo '' > /usr/local/freeswitch/log/freeswitch.log"


